{% extends 'base.html' %}

{% block content %}
<div id="page-booking" class="page">
    <div class="row justify-content-center">
        <div class="col-lg-10">
            <h2 class="mb-4">Confirm Your Booking</h2>
            <form id="booking-form" method="post">
                {% csrf_token %}
                <div class="card">
                    <div class="row g-0">
                        <!-- Left Side: Booking Details -->
                        <div class="col-md-6 bg-light p-4 p-md-5 rounded-start-2">
                            <h4 class="card-title" id="book-space-location"> {{space.location.get_area_display}} </h4>
                            <p class="text-muted" id="book-space-env"><i class="bi bi-thermometer-sun"></i> {{ space.get_environment_conditions_display }} </p>
                            <p class="text-muted" id="book-space-loc-addr"> {{ space.location.address }} </p>
                            <hr>
                            
                            <h5 class="mb-3">Your Booking:</h5>
                            <div class="mb-2">
                                <strong>Shelves Required:</strong>
                                <span class="fs-5 fw-bold text-primary" id="book-shelf-count">{{ num_shelves_occupied }}</span>
                            </div>
                            <div class="mb-2">
                                <strong>Shelf Size:</strong>
                                <span>{{shelf_length}} cm x {{shelf_width}} cm x {{shelf_height}} cm (Standard)</span>
                            </div>
                            <div class="mb-2">
                                <strong>Price per Shelf:</strong>
                                <span id="book-shelf-price">${{ space.price_per_day}} per day</span>
                            </div>
                        </div>
                        
                        <!-- Right Side: Form -->
                        <div class="col-md-6 p-4 p-md-5">
                            <h5 class="mb-3">Select your dates</h5>
                            <div class="mb-3">
                                <label for="book-start-date" class="form-label">Start Date</label>
                                {{ form.start_date }}
                            </div>
                            <div class="mb-3">
                                <label for="book-end-date" class="form-label">End Date</label>
                                {{ form.end_date }}
                            </div>
                            <hr>
                            <!-- Price Summary -->
                            <div id="booking-summary">
                                <div class="d-flex justify-content-between mb-2">
                                    <span class="text-muted">Total Days:</span>
                                    <strong id="book-total-days">0</strong>
                                </div>
                                <div class="d-flex justify-content-between mb-2">
                                    <span class="text-muted">Price per Day:</span>
                                    <strong id="book-price-per-day">$0.00</strong>
                                </div>
                                <div class="d-flex justify-content-between fs-5 mt-2 pt-2 border-top">
                                    <strong>Estimated Price:</strong>
                                    <strong class="text-primary" id="book-total-price">$0.00</strong>
                                </div>
                            </div>
                            
                            <div class="d-grid mt-4">
                                <button type="submit" class="btn btn-accent btn-lg">Confirm & Book</button>
                            </div>
                        </div>
                    </div>
                </div>
            </form>
        </div>
    </div>
</div>
{% endblock %}
